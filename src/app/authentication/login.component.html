<sg-login-carousel></sg-login-carousel>
<form (ngSubmit)="btnSignInClickHandler()" #loginForm="ngForm" novalidate>
    <div class="container-fluid" style="margin-top: 30px">
        <div class="row">
            <div class="col-xs-12 col-sm-offset-1 col-sm-10 col-md-offset-3 col-md-6 col-lg-offset-4 col-lg-4">
                <div class="panel-default panel-login">
                    <div class="panel-heading-login">
                        <h3 translate="yes">Welcome to Knipper Client Reporting Portal</h3>
                    </div>
                    <div class="panel-body" [ngBusy]="busyPromise">
                        <div class="col-xs-12">
                          <div class="form-horizontal">
                            <div class="form-group" [ngClass]="{'has-error': !userName.valid && ! userName.pristine && !userName.untouched}">
                              <label for="in-username" class="sr-only" translate="yes">Email <Address></Address></label>
                              <input type="text" id="in-username" class="form-control" [(ngModel)]="loginData.userName" name="userName" placeholder="Email" #userName="ngModel" required />
                              <sg-field-validation [message]="'repportal-validation-emailrequired'" [hidden]="userName.valid || userName.pristine || userName.untouched"></sg-field-validation>
                            </div>
                            <div class="form-group" [ngClass]="{'has-error': !password.valid && ! password.pristine && !password.untouched}">
                              <label for="in-password" class="sr-only" translate="yes">Password</label>
                              <input type="password" id="in-password" class="form-control" [(ngModel)]="loginData.password" name="password" placeholder="Password" #password="ngModel" required />
                              <sg-field-validation [message]="'repportal-validation-passwordrequired'" [hidden]="password.valid || password.pristine || password.untouched"></sg-field-validation>
                            </div>
                            <div class="form-group">
                              <div>
                                <button type="submit" id="btn-signin" class="btn btn-primary" [disabled]="!loginForm.form.valid" translate="yes">Login</button>                                
                              </div>
                            </div>
                            <div class="form-group"></div>                            
                            <div class="form-group" *ngIf="doShowPasswordResetLink">
                              <a routerLink="/passwordforgot" translate="yes">Forgot password</a>
                            </div>
                          </div>
                          </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<ng-template #expiredpopup let-c="close">
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="passwordExpired()">&times;</button>
        <h4 class="modal-title" translate="yes">repportal-authentication-passwordexpired</h4>
    </div>
    <div class="modal-body">
        <p><span translate="yes">repportal-authentication-resetpassword</span></p>
    </div>
    <div class="modal-footer">
        <div>
            <button class="btn btn-primary btn-block" (click)="passwordExpired()" translate="yes">repportal-authentication-ok</button>
        </div>
    </div>
</ng-template>
<ng-template #resetpopup let-c="close">
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="resetRequired()">&times;</button>
        <h4 class="modal-title" translate="yes">repportal-authentication-resetrequired</h4>
    </div>
    <div class="modal-body">
        <p><span translate="yes">repportal-authentication-resetpassword</span></p>
    </div>
    <div class="modal-footer">
        <div>
            <button class="btn btn-primary btn-block" (click)="resetRequired()" translate="yes">repportal-authentication-signin</button>
        </div>
    </div>
</ng-template>
